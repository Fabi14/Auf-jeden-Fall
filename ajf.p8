pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
debug = ""
mode_2d_saw=0
mode_2d_falling=1
mode_iso=2
vec = function(x,y)
    local v ={}
    v.x=x or 0
    v.y=y or 0
    mt ={__add = function (a,b)
        return vec(a.x+b.x,a.y+b.y)
    end}
    setmetatable(v,mt)
    return v
end
-->8
--saw/ tree
create_saw = function()
    local saw = {p=vec(64,108),dx=0}
    saw.draw = function(saw)
        spr(1,saw.p.x - 4*8, saw.p.y - 8, 8, 2)
    end
    saw.update = function (saw)
        if btn(4, 0) and not btn(4, 1) then
            if(saw.dx<0) saw.dx*=-1
            saw.dx += 0.05
        elseif not btn(4, 0) and btn(4, 1) then
            if(saw.dx>0) saw.dx*=-1
            saw.dx -= 0.05
        elseif btn(4, 0) and btn(4, 1) then
            saw.dx-=0.3*saw.dx
        end
        saw.p += vec(saw.dx*0.1,-saw.dx*saw.dx*0.0001)
        if saw.p.x < 50 then
            saw.p.x =50
            saw.dx = 0
        elseif saw.p.x >78 then
            saw.p.x =78
            saw.dx = 0
        end
        if(saw.p.y <102)mode = mode_2d_falling

    end
    return saw
end

create_tree = function ()
    local tree={a=0}
    tree.draw = function (tree)
        rotation_point={x=68,y=103}
        a=tree.a
        for i=0,-20,-0.25 do
            tline(68+i*cos(-a),103+i*sin(-a),68+i*cos(-a) + 80*cos(-a+0.25),103+i*sin(-a) +80*sin(-a+0.25) ,17+(20+i)/8,12,0,-1/8)

        end
        for i=0,12,0.25 do
            tline(68+i*cos(-a),103+i*sin(-a),68+i*cos(-a)+ 80*cos(-a+0.25),103+i*sin(-a)+80*sin(-a+0.25),17+(20+i)/8,12,0,-1/8)
        end
        pset(rotation_point.x,rotation_point.y,8)
    end
    return tree
end

-->8
--init
_init = function ()
    mode = mode_2d_saw
    saw,tree = create_saw(),create_tree()
end
-->8
--draw

_draw = function()
    cls(0)
    map(0,0,0,0,16,16)
    tree:draw()
    saw:draw()
    if mode == mode_2d_saw then
        circfill(63,95,5,4)
    end
    print(debug,0,0)
end
-->8
--update

_update = function()
    if mode == mode_2d_saw then
        saw:update()
    elseif mode == mode_2d_falling then
        if( tree.a<0.25)tree.a+=0.001
    end
end

__gfx__
00000000000000444440000000000000000000000000000000000000000004444400000000000000000000000000000000000000000000000000000000000000
00000000000004444444400000000000000000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000
007007000000044444444400006000000006000000006000000006000044444444400000b0000000000000000000000000000000000000000000000000000000
000770000000044400044440066000600066000600066000600066000444400044400000b0000000000000000000000000000000000000000000000000000000
000770000000044400004440666606660666606660666606660666600444000044400000b000b000000000000000000000000000000000000000000000000000
007007000000044400000444666666666666666666666666666666664440000044400000b0b0b0b000b000b00000000000000000000000000000000000000000
000000000000044400000444666666666666666666666666666666664440000044400000b3b0bb300bb303b00000000000000000000000000000000000000000
00000000000004440000044466666666666666666666666666666666444000004440000033333333333333330000000000000000000000000000000000000000
00000000000004440000044466666666666666666666666666666666444000004440000033333333333333330000000000000000000000000000000000000000
00000000000004440000044455565555655556555556555565555655444000004440000033333333333333330000000000000000000000000000000000000000
00000000000004440000044455555555555555555555555555555555444000004440000033333333333333330000000000000000000000000000000000000000
0000000000000444000044400000000000000000000000000000000004440000444000003333b3bb33b3333b0000000000000000000000000000000000000000
000000000000044400044440000000000000000000000000000000000444400044400000b33bbbbbbbbb333b0000000000000000000000000000000000000000
000000000000044444444400000000000000000000000000000000000044444444400000bbbbbbbbbbbbb3bb0000000000000000000000000000000000000000
000000000000044444444000000000000000000000000000000000000004444444400000bbbbbbbbbbbbbbbb0000000000000000000000000000000000000000
000000000000004444400000000000000000000000000000000000000000044444000000bbbbbbbbbbbbbbbb0000000000000000000000000000000000000000
00000000000000000000000000000000000000033000000000000000000000000000333333330000000000000000000000044444444440000000000000000000
00000000000000000000000000000000000000033000000000000000000000000003333333333000000000000000000000044444444440000000000000000000
00000000000000000000000000000000000000333300000000000000000000000033333333333300000000000000000000044444444440000000000000000000
00000000000000000000000000000000000000333300000000000000000000000333333333333330000000000000000000044444444440000000000000000000
00000000000000000000000000000000000000333300000000000000000000003333333333333333000000000000000000044444444440000000000000000000
00000000000000000000000000000000000003333330000000000000000000033333333333333333300000000000000000044444444440000000000000000000
00000000000000000000000000000000000033333333000000000000000003333333333333333333333000000000000000044444444440000000000000000000
00000000000000000000000000000000000033333333000000000000000333333333333333333333333330000000000000044444444440000000000000000000
00000000000000000000000000000000000333333333300000000000000000033333333333333333300000000000000000044444444440000000000000000000
00000000000000000000000000000000000333333333300000000000000000003333333333333333000000000000000000444444444444000000000000000000
00000000000000000000000000000000003333333333330000000000000000033333333333333333300000000000000000444444444444000000000000000000
00000000000000000000000000000000003333333333330000000000000000333333333333333333330000000000000004444444444444400000000000000000
00000000000000000000000000000000033333333333333000000000000003333333333333333333333000000000000044444444444444440000000000000000
00000000000000000000000000000000333333333333333300000000000033333333333333333333333300000000004444444444444444444400000000000000
00000000000000000000000000000003333333333333333330000000003333333333333333333333333333000000444444444444444444444444000000000000
00000000000000000000000000000033333333333333333333000000333333333333333333333333333333334444444444444444444444444444444400000000
000000ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000f0000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000f000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000f000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000f000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000f000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000f0000f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000ffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000f00ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000f000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000ff00000f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
008ff0000000f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
008000000000f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00800000000088800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00232425260000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00333435360000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a002728292a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a003738393a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00002c2d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00002c2d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00002c2d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a00002c2d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a000b2c2d0e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000000000000000000000001a001b2c2d1e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a00000000093b3c3d3e0a000000001a002b2c2d2e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a0a090a0919191919191a09090a0a1a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1a1a1a1a1a1a1a1a1a19191a19191a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
